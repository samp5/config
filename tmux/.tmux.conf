# Set colors
set -g default-terminal "xterm-256color"
set-option -g status-style bg=default

# Start window and pane index at 1 not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

#Automatically set window title
set-window-option -g automatic-rename on
set-option -g set-titles on

# Reset Prefix
set -g prefix C-a
unbind C-b
bind-key C-a send-prefix

# Enable mouse control
set -g mouse on

# Set window splitting keys
unbind %
bind ] split-window -h -c "#{pane_current_path}"

unbind '"'
bind - split-window -v -c "#{pane_current_path}"

# Quick sorce file to refresh tmux config
unbind r
bind r source-file ~/.tmux.conf

# Use shift + arrow key to move between windows in a session
bind -n S-Left  previous-window
bind -n S-Right next-window

#Vim-like navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Vim-like navigation in copy mode
set-window-option -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection

# Select with mouse
unbind -T copy-mode-vi MouseDragEnd1Pane

# Resize pane shortcuts
bind -r H resize-pane -L 10
bind -r J resize-pane -D 10
bind -r K resize-pane -U 10
bind -r L resize-pane -R 10

bind -r M resize-pane -Z

# add tpm as a plugin
set -g @plugin 'tmux-plugins/tpm'

#tmux plugins
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'olimorris/tmux-pomodoro-plus'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-online-status'

# Capture pane status
set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-restore 'on'
set -g @resurrect-strategy-nvim 'session'

# Pomodoro
set -g @pomodoro_interval_display "[%s/%s]"
set -g @pomodoro_granularity 'on'
set -g status-interval 1                       # Refresh the status line every second
set -g @pomodoro_on "#[fg=$text_red]üçÖ "
set -g @pomodoro_complete "#[fg=$text_green]üçÖ "
set -g @pomodoro_pause "#[fg=$color_yellow]üçÖ "
set -g @pomodoro_prompt_break "#[fg=$color_green]üï§ ? "
set -g @pomodoro_prompt_pomodoro "#[fg=$color_gray]üï§ ? "



# Length of tmux status line
set -g status-left-length 30
set -g status-right-length 150

set-option -g status "on"

# Default statusbar color
set-option -g status-style bg='#2C323C',fg=colour223 # bg=bg1, fg=fg1

# Default window title colors
set-window-option -g window-status-style bg='#BEB78D',fg='#2C323C' # bg=yellow, fg=bg1

# Default window with an activity alert
set-window-option -g window-status-activity-style bg='#2C323C',fg=colour248 # bg=bg1, fg=fg3

# Active window title colors
set-window-option -g window-status-current-style bg=red,fg='#2C323C' # fg=bg1

# Set active pane border color
set-option -g pane-active-border-style fg='#BEB78D'

# Set inactive pane border color
set-option -g pane-border-style fg=colour239

# Message info
set-option -g message-style bg='#1E1E27',fg='#C8C093' # bg=bg2, fg=fg1

# Writing commands inactive
set-option -g message-command-style bg=colour239,fg=colour223 # bg=fg3, fg=bg1

# Pane number display
set-option -g display-panes-active-colour colour1 #fg2
set-option -g display-panes-colour '#2C323C' #bg1

# Clock
set-window-option -g clock-mode-colour colour109 #blue

# Bell
set-window-option -g window-status-bell-style bg='#98c379',fg=colour235 # bg=red, fg=bg

set-option -g status-left "\
#[fg=#282c34, bg=#98c379]#{?client_prefix,#[bg=#61afef],} Ó™Ö #S \
#[fg=#93c379, bg=#232c34]#{?client_prefix,#[fg=#61afef],}ÓÇ¥#{?window_zoomed_flag, ÓÆÅ ,}"

set -g @online_icon Ôá´
set -g @offline_icon Û∞§´

set-option -g status-right "\
#[fg=#98C379, bg=#2C323C] ÓÇ∂\
#[fg=#16161D, bg=#98C379] #{pomodoro_status} ÓÇ∂\
#[fg=#787189,bg=#16161D,noitalics] Û∞ìÖ #{cpu_percentage} #{online_status} \
#[fg=colour238] ÓÇ∂\
#[fg=colour246, bg=colour238] %b %d '%y\
#[fg=#E5C07B] ÓÇ≥ %H:%M \
#[fg=colour248, bg=colour239]"

set-window-option -g window-status-current-format "\
#[fg=#2C323C, bg=#98C379]ÓÇ¥\
#[fg=colour239, bg=#98C379] #I ÓÇµ\
#[fg=colour239, bg=#98c379, bold] #W \
#[fg=#98C379, bg=#2C323C]ÓÇ¥"

set-window-option -g window-status-format "\
#[fg=#2C323C,bg=#16161D,noitalics]ÓÇ¥\
#[fg=#787189,bg=#16161D] #I ÓÇµ\
#[fg=#787189, bg=#16161D] #W \
#[fg=#16161D, bg=#2C323C]ÓÇ¥"

# Set the history limit so we get lots of scrollback.
setw -g history-limit 50000000

# Initialize TMUX plugin manager (keep this line at the very bottom of .tmux.conf
run '~/.tmux/plugins/tpm/tpm'
